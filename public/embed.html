<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Swipe Timetable Embed</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#5D5CDE',
            'primary-dark': '#4A4BC7',
          }
        }
      }
    }
  </script>
  <style>
    @keyframes slideIn {
      from { opacity: 0; transform: translateY(10px) scale(0.98); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }
    .slide-in { animation: slideIn 0.3s ease-out; }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-950 text-gray-900 dark:text-white">
  <div id="timetableCards" class="grid gap-4 p-6 md:grid-cols-2 lg:grid-cols-3 slide-in"></div>

  <script>
    const STORAGEKEY = "swipetimetabledata";

    // Try get data from localStorage, sessionStorage or cookies
    function getStorageItem(key) {
      try { const val = localStorage.getItem(key); if (val) return val; } catch(e){}
      try { const val = sessionStorage.getItem(key); if (val) return val; } catch(e){}
      try {
        const cookies = document.cookie.split(';');
        for (let c of cookies) {
          const [k, v] = c.trim().split('=');
          if (k === key) return decodeURIComponent(v);
        }
      } catch(e){}
      return null;
    }

    function getTimetableData() {
      const raw = getStorageItem(STORAGEKEY);
      if (!raw) return null;
      try { return JSON.parse(raw); } catch { return null; }
    }

    // Icons loosely adapted from original subject icon logic
    function getSubjectIcon(subject) {
      if (!subject) return "M12 6v13m0-13C10.8 5.5 9.2 5 7.5 5S4.2 5.5 3 6.3v13c1.2-.8 2.8-1.3 4.5-1.3s3.3.5 4.5 1.3m0-13c1.2-.8 2.8-1.3 4.5-1.3s3.3.5 4.5 1.3v13c-1.2-.8-2.8-1.3-4.5-1.3s-3.3.5-4.5 1.3";
      const s = subject.toLowerCase();
      if (s.includes("math")) return "M9 7h6m0 10v-3m-3 3h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z";
      if (s.includes("english")||s.includes("literature")) return "M12 6v13m0-13C10.8 5.5 9.3 5 7.5 5S4.2 5.5 3 6.3v13c1.2-.8 2.7-1.3 4.5-1.3s3.3.5 4.5 1.3m0-13c1.2-.8 2.8-1.3 4.5-1.3s3.3.5 4.5 1.3v13c-1.2-.8-2.8-1.3-4.5-1.3s-3.3.5-4.5 1.3";
      if (s.includes("science")||s.includes("biology")||s.includes("chemistry")) return "M8 4h8l-1 1v5a2 2 0 00.6 1.4l5 5c1.3 1.3.4 3.4-1.4 3.4H4.8c-1.8 0-2.7-2.1-1.4-3.4l5-5A2 2 0 009 10V5L8 4z";
      if (s.includes("history")) return "M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z";
      if (s.includes("art")||s.includes("music")||s.includes("drama")) return "M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4v14a4 4 0 01-4 4h12a2 2 0 002-2v-4h-2.3";
      return "M12 6v13m0-13C10.8 5.5 9.2 5 7.5 5S4.2 5.5 3 6.3v13c1.2-.8 2.8-1.3 4.5-1.3s3.3.5 4.5 1.3";
    }

    function renderCardsLayout(data) {
      if (!data || !data.periods) { 
        document.getElementById("timetableCards").innerHTML = 
          '<p class="text-center text-gray-500 text-lg">No timetable data found</p>';
        return;
      }

      const schedule = [
        {label:'Period 1',val:data.periods.period1,room:data.periods.room1,time:'8:50'},
        {label:'Period 2',val:data.periods.period2,room:data.periods.room2,time:'9:40'},
        {label:'Break',val:'Morning Break',room:null,time:'10:30'},
        {label:'Period 3',val:data.periods.period3,room:data.periods.room3,time:'10:50'},
        {label:'Period 4',val:data.periods.period4,room:data.periods.room4,time:'11:40'},
        {label:'Lunch',val:'Lunch Break',room:null,time:'12:30'},
        {label:'Period 5',val:data.periods.period5,room:data.periods.room5,time:'1:10'},
        {label:'Period 6',val:data.periods.period6,room:data.periods.room6,time:'2:00'},
      ];

      const gradients = [
        'from-blue-500 to-blue-600',
        'from-purple-500 to-purple-600',
        'from-pink-500 to-pink-600',
        'from-indigo-500 to-indigo-600',
        'from-teal-500 to-teal-600',
        'from-orange-500 to-orange-600'
      ];

      document.getElementById("timetableCards").innerHTML = schedule.map((item,i)=>{
        const isBreak = item.label.includes('Break');
        const empty = !item.val || !item.val.trim();
        const icon = getSubjectIcon(item.val);
        const grad = isBreak ? 'from-gray-400 to-gray-500' : gradients[i % gradients.length];
        return `
        <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 border-2 border-primary/20 shadow-md">
          <div class="flex items-center gap-4 mb-3">
            <div class="flex-shrink-0 w-12 h-12 bg-gradient-to-br ${grad} rounded-xl flex items-center justify-center text-white shadow-lg">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="${icon}"/>
              </svg>
            </div>
            <div class="flex-1">
              <div class="text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase">${item.label}</div>
              <div class="text-xl font-bold ${empty ? 'text-gray-400 dark:text-gray-500' : 'text-gray-900 dark:text-white'}">
                ${empty ? 'Free Period' : item.val}
              </div>
              ${item.room ? `<div class="text-sm text-gray-500 dark:text-gray-400">${item.room}</div>` : ''}
            </div>
            <div class="text-lg font-bold text-primary">${item.time}</div>
          </div>
        </div>`;
      }).join('');
    }

    const data = getTimetableData();
    renderCardsLayout(data);
  </script>
</body>
</html>
